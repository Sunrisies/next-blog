在上一章中，我们讲解了对象的 UML 关系图，根据这个，我们可以绘制出类图，以此来实现我们的顶层框架设计。

当然，我们的所有代码都是为需求服务的，本章我们就来看一下**需求设计**是怎么评估的，又应该怎么对需求的不合理地方进行反馈。

需求分析
----

其实，在需求分析之前，是有个**可行性分析**的，可行性分析是分析软件的可行性，也就是：**能不能做，值不值得做**。比如：我想要造个时光机，这不可能做；我想要造个打败微信的 App，能做，但是不值得。所以，这两个就是不可行的，想出这样需求的人建议直接叉出去。

当然，可行性分析是产品经理负责的事，跟我程序员没半毛钱关系。而程序员要参与的第一道工序，就是**需求分析**。

需求分析是干啥的？

**需求分析是软件开发的第一个阶段，它最基本的定义是规定我们要做什么**。

也就是说，如果没有需求分析，程序员是处于懵逼状态的，没价值的，自己都不知道自己要干什么。直到需求分析出来后，程序员才知道自己要干啥，才有了与产品经理 PK 的矛盾点。

总的来说，需求分析分为两大类：**功能需求**和**性能需求**。

### 功能需求

> 功能需求指的是：提出新功能，来吸引一部分新用户。

这个就很好理解了，比如：我们要做一个 App 的直播间需求，这个需求是现在没有的，需要从头实现的。这就是功能需求。

对于参加功能需求的每个人来说，他们的心理期望大致如下。

**产品经理**：我这需求总算是出了，我要讲给他们听，希望他们不要有太多意见，免得我脸上挂不住，最重要的是，希望他们的工时估测能尽量短一下，能尽量早地估出来，另外，希望上线后能迎来一大波**新增用户**。这样我的绩效就有指望了，季度的 OKR 也可以吹吹了。

> 新增用户指的是：新安装 App 或者使用新功能的用户数量。

**程序员**：今天要开需求会议了，希望他的这个地方能商量下改一改，毕竟这一块不好做，希望工时能估长点，毕竟不确定的因素太多了，希望测试期间能少点 bug，上线后也别出 bug，最好能迎来一大波**新增用户**，这样我的年终奖就可以多一些了，毕竟只有我们部门整体增长，年终奖才能多一些。

**测试**：这个需求我看过了，发现了几个问题，待会儿在会议上就提出来，完善我的测试用例，并且让产品和开发意见一致，免得他们理解偏差导致开发的和需求不一致，进而导致我这边测试时间延长，希望开发能如期提测，也别出那么多 bug，考虑得全面点，能考虑到我没考虑到的，线上也别出问题，能迎来一波**新增用户**最好，这样我的季度 OKR 就有指望了，也有底气参加年度优秀员工了。

到这里，我们可以总结一下每个人的期望。

*   产品：讲解需求，期待上线时间。
*   开发：评估需求，输出提测时间。
*   测试：评估需求，输出上线时间。

所以，这里我们就连上了，**需求->开发->提测->测试->上线**。

这里面有三个时间点：需求评估时间、提测时间、上线时间。

其中**需求评估时间**之前都是产品在忙活，忙活着输出需求文档；**需求评估时间**到**提测时间**这段时间主要就是开发在忙活，忙活着写代码实现功能；而**提测时间**到**上线时间**这段时间就是开发和测试一起忙活，测试提 bug，开发补 bug。

可以看到，对于我们程序员来说，主要的工作时间就是：**需求评估之后到上线之前**。

而且，我们知道，产品、开发和测试，都有一个共同点：**新功能能迎来一波新增用户**。

所以，我们到这里就可以理清**功能需求**的目的了：**新功能能带来一部分新增用户**。

比如说：我看到别人在玩微信的跳一跳功能，我发现很有趣，我就装了微信，于是我就成了一个新用户。

那么，如果玩了之后，我发现它很卡，我想卸载了，这个时候，怎么让我不卸载呢？

嗯，这就涉及到性能需求了。

### 性能需求

> 性能需求指的是：优化现有的功能，来留住一部分老用户。

这个也很好理解，比如：我们的直播间太卡了，用户点击一下得等个 10 分钟才能进去，结果有的人进去发现都直播完了，退出还得 10 分钟，人家就直接去 0 星差评加卸载了。于是产品就让优化下，这就是性能需求。

其实，你可以在你的代码里，时不时偷偷来个`Thread.sleep(10_000)`，这样创造需求，后面产品必定要提出性能优化需求，你再把它删掉就好了，但是你要假装忙了很久很久。

当然，我个人是**不建议**这么干的，这是互联网，大家都是读书人，懂得都懂。

比如微信的跳一跳功能，如果太卡，那么用户就会失去兴趣，就不玩了，第一天可能有 100 个用户玩，第二天只剩 50 个了，我们用第二天的用户数量除以第一天的用户数量可以得到**存留率**，这里的存留率就是 50%。

所以，一个常规的套路就是：先快速开发一个新功能抢占新增用户，然后再逐渐优化这个功能来提高用户的存留率。比如，我先快速更新一个跳一跳功能，有 bug 也没事，反正能带来用户就行；然后，我再去优化这个功能，比如：提高加载速度，提供不同的青蛙模型等。

所以，性能优化的主要目的就是：**提高老用户的存留率**。

这些内容好像都是产品的工作，好像跟我们程序员没关系啊？

有关系！

程序员视角的需求分析
----------

对于程序员来说，最重要的就是**需求分析会议**了，因为你接下来要做什么，都是在这里决定的。

因为大部分产品都是不懂技术的，他们提出的需求都是默认**程序员动动手**就能实现的。

比如，对于移动端来说，99.999% 的产品都是抄袭现有功能，而且抄袭的目标对象是苹果手机，大家都知道，苹果手机是不开源的，而且系统自带一些动画，差劲的产品就会让 Android 程序员仿写一个相似的动画，WQNMLGB！

因为我们知道，不同的系统有不同的体验，久而久之就成了习惯，比如：我用 Android 手机返回键久了，就改不回去了，如果一个产品无视 Android 用户的习惯，直接想强制 Android 程序员仿照苹果手机的操作习惯去实现相关功能，那么这个产品就是个差劲产品，就是不合格的，我希望我们能少一些这样的人，而多一些有包容心的人；大格局的人；有意义的人；高尚的人；纯粹的人；有道德的人；脱离了低级趣味的人；有益于人民的人……

换句话说，你怎么不让苹果添加一个返回键呢？你怎么不让 IE 浏览器添加一个开发者模式呢？

对于这种需求，你要大胆地说：No！No！No！

如果你现在不拒绝，那么以后你就更难拒绝了，因为他会说：那上一次的怎么就能实现呢？人性的恶是远大于人性的善的。

所以，第一点就是：**对于不合理的需求要大胆地拒绝**。

你有没有想过一个问题：你自己写的代码每天运行了多少次？

同样的`if-else`，如果我是抖音开发者，我的代码每天运行上亿次，而你做的一个不知名的 App 每天可能只有一次，甚至从来都没运行过。假如代码每跑一次就给 1 毛钱的话，我就是几千万，你就是不值钱，白送都不要的那种。

这，就是代码的价值！

我们要做有价值的人，写有价值的代码！

换句话说，**我们要做有价值的需求**。而这个需求，是靠自己争取的。

比如说，咱俩都是做微信 App 的，我做了朋友圈功能，而你做了设置里面的修改系统语言功能，你觉得咱俩谁更有价值呢？换句话说，咱俩谁更容易加钱呢？

所以，我们在需求会议上，如果觉得产品的某个需求没有价值，就要大胆提出质疑，发表自己的看法，有些功能可能是产品一时冲动，心血来潮，根本就没做市场调研，就凭着一腔热血提出来的。而此时你要做的，就是滋醒他，他可能还会感激你呢，换句话说，**我们要避免无价值的需求，让无价值的需求腹死胎中**。

那么，产品每次提出的需求可能有很多个，你怎么分辨出哪些是有价值的需求呢？

这个很简单，就看你们 App 的定位了，比如：社交的类的 App，其核心一定是聊天和圈子；购物类的 App，其核心一定是商品的展示和交易。最简单的，你就去看你们 App 的埋点，埋点多的地方，就是核心！

啥？你说你没权利看埋点？

大哥，听我一句劝，赶紧跑路吧，公司没把你当自己人啊。

那么，如果我知道了核心，我要怎么把它揽入怀中呢？

很简单啊，主动争取。

核心功能是使用得最多的，一定要保证稳定，所以，你要在这方便表现出自己 Cow B 的地方，争取展示给其他人，并且主动争取过来。

如果你就想着混混日子，不想那么累，那么推荐你去看看本小册的第一章，你是否有所改变，如果还没有，那么你也别看了，你留言联系下我，我把钱给你退了。趁早改行，送外卖、炒粉都行，乐夫天命复奚疑奚?

最后一点就是：**学会讨价还价**，工时是自己估测的，自己一旦做出了决定，就要负起责任，所以，如果你觉得自己可能 3 天开发完毕，那么你可以要 4 天时间，最后一天作为缓冲，你要了 4 天时间，可以第三天就提测；但是如果你要了 3 天时间，你却不能第 4 天才提测。这就是人性的恶！人总是朝着有利于自己的情况奔跑。

到这里，我们程序员在需求会议上要做的事情就三点：

1.  拒绝不合理需求；
2.  拒绝无价值需求，争取有价值需求；
3.  给自己的工时添加缓冲期。

当然，以上三点是在合理的范围内做的，不能太过分，你不能直接把产品的所有需求全部否定，也不能直接给自己的缓冲期加个几百天，如果你是国企，当我没说。

总结
--

本文到这里就结束了，我们本章主要讲了需求会议的目的，以及程序员在需求评审会议上要做的事情。

*   需求会议的目的是确定要做的事情，以及上线的日期。
*   需求分为功能需求和性能需求。
*   功能需求的目的是提高新增用户；性能需求的目的是提高存留用户。
*   我们要拒绝不合理和无价值的需求，争取有价值的需求。
*   我们估测工时一定要留缓冲期。

下一章中，我们就带着这些理论，来做一个实际的、沉浸式的直播间的需求评审，例子来源于某大型千万级用户直播 App，大家可以一起体验下产品、开发、测试的心路历程。
第6章、电控开关
========

标签： 计算机是怎样运行的

* * *

继电器充当电控开关
---------

二进制数中的每一个二进制位正好和一根信号线上的电压信号相对应，这样我们就可以使用一组电压信号来表示一个二进制数，然后将这一组电压信号从信号发送设备传输到信号接收设备，也就意味着我们将一个二进制数从一个地方传输到了另一个地方，下图就展示了一个有8根信号传输线的信号发送设备和接收设备，一次可以传输一个范围在0~255之间的一个二进制数：

![image_1ep5uqdoj1lma1a31jv184e2hl9.png-19.3kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9cde2172ef364cd9a8dac18b71903304~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=787&h=361&s=19725&e=png&b=ffffff)

仅仅将电压信号从发送设备传输到接收设备，这很有用，因为电压信号的传输是非常快的，如果导线足够长，能让两个离得很远的人在非常短的时间内完成通信。不过这不够，我们期望电压信号在传输过程中可以做一些我们期望的改变，也就是所说的对信号做一些处理，这可以解决很多问题（比方说发明一个计算机什么的）。

对于单条信号线上的电压信号来说，“改变”只能发生在下边两种情况：

*   原信号是逻辑0，改变后变为逻辑1。
*   原信号是逻辑1，改变后变为逻辑0。

当然，改变不是说改就改的，需要借助我们人的帮助，如下图所示：

![image_1epgm5tsdp206kq19e01hv5lc7p.png-39.5kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a27a6eb3ef424196ba2adbda0ad3d37a~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=830&h=536&s=40447&e=png&b=ffffff)

`发送设备`生成A点的信号后，并不直接通过信号线传输到接收设备，而是先将A点的信号发送给我们新添加的一个设备，在这里我们称为`信号处理设备`。我们通过`信号处理设备`中的电压表可以读取到A点的信号，然后再通过调整新添加设备中的开关，来生成Y点的信号，`接收设备`实际收到的是Y点的信号。如果想实现信号的“改变”，我们可以：

*   如果电压表显示A点的信号是逻辑0，那么我们闭合开关1、断开开关2，Y点的信号就是逻辑1。
*   如果电压表显示A点的信号是逻辑1，那么我们断开开关1、闭合开关2，Y点的信号就是逻辑0。

其实A点的信号并不一定非得是由`信号发送设备`生成的，也可能是其他的`信号处理设备`生成的；Y点的信号也不一定非得发送给`信号接收设备`，发送给别的`信号处理设备`也是可以的。那么我们抛开`信号发送设备`和`信号接收设备`，只关心一下信号处理设备的功能，我们把A点的信号称为输入信号，简称为Vin；把Y点的信号称为输出信号，简称为Vout，如下图所示：

![image_1epgm7tvqmoo1dnl1um2h0v12f86.png-27.9kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5d5e43382874455695719d53886eee09~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=616&h=544&s=28560&e=png&b=ffffff)

事情好像被完美的解决了，不过使用人完成这项改变电压信号的工作有许多缺点：

*   是人就可能犯错，他不小心按错了开关那不就导致信号传输错误了么？
*   人需要休息，总不能人一直在那盯着电压表吧~
*   人的反应是很慢的，从观测到电压变化到作出反应可能隔了好几秒。
*   人还得发工资（资本家的本性暴露了哈）。

如果开关的状态能随着A点的电压信号的改变而改变就好了，也就是如果A点的信号是逻辑0，那么开关1自动闭合、开关2自动断开，如果A点的信号是逻辑1，开关1自动断开、开关2自动闭合。怎么做到这一点呢？我们先看一根绕满导线的铁钉：

![image_1ep87omnv61j13qtl8c1uko16p39.png-11.1kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/04e293ed5a8d4ccdb286d218b6209288~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=64&h=228&s=11334&e=png&b=fefefe)

一根平平无奇的铁钉绕满了导线，还是一根平平无奇的铁钉。但是如果我们将导线两端接入电路中，事情就不那么简单了，如下图所示（引入电阻R主要是为了防止开关闭合时流过电流过大，烧坏导线或者电源）：

![image_1ep8q9d384ej145vs7p1i6fi3k3h.png-53.9kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2f8afb1463fa41718eec11e5726832de~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=809&h=380&s=55151&e=png&b=fefefe)

如图所示，在开关断开的时候，缠绕在铁钉上的导线中无电流通过，铁钉无法将铁屑吸引起来。在开关闭合的时候，缠绕在铁钉上的导线中有电流通过，铁钉将铁屑吸引起来。这主要是因为通电的导线产生了磁场，不过通电直导线的磁性太弱，将导线绕在铁棒上的磁性就会很强，足以将铁屑吸引起来。这种通过通电而产生磁性的装置也可以被称为电磁铁。我们可以使用电磁铁设计一个如下所示的电路：

![image_1epgmddk7ka612901ggsde152l8j.png-110.9kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/e8007b1fe49f4cfe95339495b75d55bc~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=688&h=566&s=113540&e=png&b=fdfdfd)

上边这个电路的工作过程如下所示：

*   当开关闭合时，M点为高电压，N点为低电压，电路中有电流通过，电磁铁拥有磁性，会将衔铁吸下来。
*   当开关断开时，M点和N点同为低电压，电路中没有电流通过，电磁铁没有磁性，在弹簧的作用下衔铁又恢复到原先的位置。

这个装置称为电磁继电器，也可以简称为继电器。上边继电器的示意图还是有点复杂的，我们再简化一下：

![image_1epgmhn171u9jnb87dda091cg890.png-19.1kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/129678a3927c49668aba5251c909ad5c~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=370&h=366&s=19521&e=png&b=ffffff)

如图所示，铁片（就是之前上一幅图中的衔铁）的左端被固定住不能移动，右端可以移动。在导线中无电流时，铁片的右端与触点1接触（这是弹簧的作用，我们的简化示意图中没画），当导线中有电流通过时，铁片被电磁铁吸下来，铁片的右端与触点2接触。

在上图中，N点的电压始终为低电压，M点的电压取决于开关是否闭合。如果我们直接使用外部的电压信号来作为M点的电压会发生什么事呢，如下图所示：

![image_1epfvdfve1gb01akiqvf1qcu1ug34e.png-15.8kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/41ed8109f1e0454a8e338683d3c282e5~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=380&h=308&s=16131&e=png&b=fefefe)

如上图所示：

*   当Vin为高电压信号时，也就是逻辑1时，铁片会被吸下，铁片的右端与触点2接触。
*   当Vin为低电压信号时，也就是逻辑0时，铁片不会被吸下，铁片的右端与触点1接触。

大家看到了吗，我们可以通过控制Vin，来间接控制铁片右边与哪个触点接触，相当于做了一个由电控制的开关，所以我们也把继电器称为`电控开关`！有了电控开关之后，我们就可以让电控开关替代之前`信号处理设备`中手动拨动的开关，如下图所示：

![image_1epgmkeli193p7fn15r11o2pb2g9d.png-36.2kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ce01bd042ff64c31b58235d06488c5a5~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=593&h=546&s=37033&e=png&b=fefefe)

让我们来分析一下这个设备到底是如何运行的：

*   当输入电压Vin是低电压，也就是A点的信号是逻辑0时，`1号继电器`和`2号继电器`中均中无电流通过，`铁片1`和`铁片2`均未被拉下。`铁片1`的右端和`触点1`接触，`触点1`连接着输出导线；铁片2的右端和`触点3`接触，`触点3`并未连接输出导线。从而使输出信号Vout与电源正极的电压相同，为V电源，也就是Y点的信号就是逻辑1。如上图所示。
    
*   当输入电压Vin是高电压，也就是A点的信号是逻辑1时，`1号继电器`和`2号继电器`中均中有电流通过，`铁片1`和`铁片2`均被拉下。`铁片1`的右端和`触点2`接触，`触点2`没有连接着输出导线；`铁片2`的右端和`触点4`接触，`触点4`连接着输出导线。从而使输出信号Vout与电源负极的电压相同，为0V，也就是Y点的信号就是逻辑0。如下图所示。
    

![image_1epgml5i11hot1qoh9431gnl4tu9q.png-37.5kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1dc159c47e714dd9908e6d6245a64e48~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=593&h=553&s=38361&e=png&b=fefefe)

赞不赞!上图中的设备没有需要人工手动拨动的开关，两个由继电器组成的电控开关可随着输入信号Vin的变化而自动变化，导致输出电压Vout也跟着变化。

我们再用简短的文字总结一下上边这个设备完成的功能：

*   当A点的信号是逻辑0时，Y点的信号是逻辑1。
*   当A点的信号是逻辑1时，Y点的信号是逻辑0。

这个完成改变单个信号的设备也被称作`反相器`，我们画个表格来描述一下`反相器`中A点信号和Y点信号之间的关系：

A

Y

0

1

1

0

A点的信号属于输入信号，Y点的信号属于输出信号，这种表示输入信号和输出信号之间关系的表格也叫做`真值表`，表格的左边列出输入信号，右边列出输出信号，表中的一行数据就代表在一种给定的输入信号下，输出信号是什么。

MOS管充当电控开关
----------

继电器属于机械设备，它又大又笨重，铁片从一个触点切换到另一个触点大约需要几十毫秒的时间（当然这个速度还是比人手动拨动开关快多了）。这也就意味着当我们改变反相器的输入信号，需要过几十毫秒输出信号才会发生变化，我们画个反相器的输入信号Vin和输出信号Vout随时间变换的示意图看一下：

![image_1epii389b1hbv5g01ail1eo11jq9a7.png-44.4kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/d0996f074f5840208fe716387344f80b~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=854&h=562&s=45461&e=png&b=ffffff)

如图所示，当输入信号Vin从逻辑0变为逻辑1后，过了时间t，输出信号Vout才从逻辑1变为逻辑0，我们就把时间t称为我们刚才制作的这个反相器的传输延迟时间。

> 小贴士：  
>   
> 电压实际上是随时间连续变化的量，某个点的电压从一个值变为另一个值时需要经历一段时间，比方说从0V变为1.5V或者从1.5V变为0V都需要经历一段时间。不过我们在图中展现的输入电压或者输出电压的变化都是瞬时完成变化，这主要是为了简化问题，大家理解一下哈~

另外，铁片的机械运动也可能导致磨损，还可能随着时间的推移继电器的弹簧老化导致铁片移动更慢，甚至不能工作。而且说不定哪一天一只飞蛾飞到了铁片和触点之间导致继电器损坏。

> 小贴士：  
>   
> 早期的计算机就是由继电器作为电控开关组成的，1947年9月哈佛马克2型的计算机中在一个发生故障的继电器中发现了一只飞蛾，飞蛾的英文就是所谓的bug。后来，bug这一词逐渐成为了计算机运行过程中出现的错误的代名词。

可能大家会觉得不可思议，看起来如此高级又复杂的计算机，其本质就是由电控开关构成的。当然继电器由于其庞大笨重，传输延迟时间较长，容易发生故障等多种与生俱来的缺点，所以使用继电器作为电控开关搭建计算机逐渐成为了历史，后续人们陆续发明了真空管以及晶体管来替代继电器这种机械式的电控开关。

真空管是一种并不依赖机械运动的电控开关，开关的闭合断开状态切换速度提高了很多，也就是传输延迟时间降低了很多，人们熟知的在美国宾夕法尼亚大学诞生的第一台通用电子计算机ENIAC里边儿就使用了上万个真空管。不过真空管体积也不小，也比较容易坏，ENIAC占地面积约170平方米，名副其实的庞然大物。

直到1947年，贝尔实验室的John Bardeen、Walter Brattain、和 William Shockley发明了晶体管，这个晶体管非常小，可靠性非常高，而且低功耗、速度快，后续晶体管逐渐替代了真空管，成为构成计算机的电控开关的首选。直到今天，在一个指甲盖大小般的芯片上可以集成几亿甚至更多个晶体管，可以说，晶体管的诞生彻彻底底地改变了人们的日常生活（其实可以说改变世界的不是乔布斯，是晶体管～），可以算上是二十世纪最伟大的发明之一。

晶体管有很多种类，我们这里想唠叨一种称之为MOS管的晶体管，也就是金属-氧化物-半导体场效应管，英文名为Metal-Oxide-Semiconductor Field-Effect Transistor ，简称MOS管（听着就很霸气的一个名字，放宽心，我们是不会去研究金属、氧化物、场效应这些名词到底是如何起作用的）。

MOS管又主要分为`nMOS管`和`pMOS管`两种，下边我们具体看一下：

*   nMOS管
    
    nMOS管的简化符号如图所示：
    
    ![image_1epilgo581cierldkui13leg21ak.png-22.5kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/3e5bfa63ed714d01a278037032d4ecfb~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=269&h=341&s=23072&e=png&b=ffffff)
    
    它的含义是当我们在G端施加高电压时，电压信号可以从D端传递到S端（近似于开关闭合），此时我们称该晶体管处于导通状态；当我们在G端施加低电压时，电压信号不可以从D端传递到S端（近似于开关断开），此时我们称该晶体管处于截止状态。
    
*   pMOS管
    
    pMOS管的简化符号如图所示：
    
    ![image_1epili20ekgn1b961o7812dv1rivb1.png-18.3kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/da72a8d1847c42fcb984b01aac2a4766~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=238&h=276&s=18707&e=png&b=fffefe)
    
    它的含义是当我们在G端施加高电压时，电压信号不可以从D端传递到S端（近似于开关断开），此时我们称该晶体管处于截止状态；当我们在G端施加低电压时，电压信号可以从D端传递到S端（近似于开关闭合），此时我们称该晶体管处于导通状态。
    
    > 小贴士：  
    >   
    > G指的是Gate，也称为栅极；D指的是Drain，也称为漏极；S指的是Source，也称为源极。MOS管导通时也是有一定电阻的，不过并不影响传递电压信号，在截止时电阻非常非常大，相当于开关开路，无法传递电压信号。完全唠叨清楚MOS管的物理组成以及各种性质可能需要好几章的篇幅，我们的重点是了解计算机是怎样运行的以及对我们程序员的影响，所以我们并不想花费太多的篇幅去唠叨晶体管的物理性质，我们只需要近似地将其认为是一个电控开关就好了。更详细的知识会在模拟电路或者数字电路中详细唠叨，当然，如果有同学学不懂的话，可以等我～
    

从上边的描述中我们可以得知，当在G端施加相同的电压时，nMOS和pMOS管具有截然相反的特性，也就是nMOS管导通时，pMOS管就截止、nMOS管截止时，pMOS管就导通。这意味着啥？这不就意味着这两开关是互补开关吗~ 之后我们会将利用nMOS管和pMOS管的互补特性来设计电路，这样的电路也被称之为CMOS电路（其中的C指的就是Complementary），现代计算机的芯片大部分都是由CMOS电路组成的。

本章的电控开关以及它们的特性就介绍完了，赶紧跳到下一章看一下用电控开关能做什么奇妙的事情吧~
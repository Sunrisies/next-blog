第13章、组合电路的不足之处
==============

标签： 计算机是怎样运行的

* * *

制作简易输入/输出设备
-----------

经过前边的苦心经营，我们终于搞出了一个名叫`ALU`的东东，对于给定的两组输入信号A和B来说，我们只需要通过调节控制信号，就可以针对A和B做不同的运算。现在狗哥跑过来请教你下边4个数累加起来的和是多少：

    74 + 29 + 32 + 20
    

用草稿纸计算太low了，一点儿技术含量都没有。咱不是刚刚制作出了一个`ALU`么，是时候来秀一把了。不过首先就遇到了两个问题：

*   怎样产生ALU的输入信号呢？
    
    不知道大家是否还记得我们很久之前制作过一个名为“互补开关信号发送设备”的东西，它的电路图如下所示：
    
    ![image_1eqf895icn3k1spesd170l1ri89.png-11.7kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/480fe2446aba4644989ae40e3f3d93ac~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=381&h=456&s=11965&e=png&b=ffffff)
    
    当开关1闭合、开关2断开时，A点的信号就是逻辑1；当开关1断开、开关2闭合时，A点的信号就是逻辑0。其实我们也可以使用一个单刀双掷开关来替代图中的开关1和开关2。如图所示：
    
    ![image_1eqf9rd9l1r4ua0le0v18io9tem.png-12.1kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1052af453e474f5fac5d8a3847bc1e41~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=387&h=296&s=12376&e=png&b=ffffff)
    
    当我们想输出逻辑1的时候，就把开关向上闭合；当我们想输出逻辑0的时候，就把开关向下闭合。我们画个图展示一下：
    
    ![image_1eqf9scmd419oe3m1sr5c64s13.png-10.8kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/a7150eafc3d94f799775e2d1dd77a732~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=530&h=313&s=11044&e=png&b=ffffff)
    
    为了美观一点，我们可以使用下边将单刀双掷开关做成一个按钮的样子。按钮向上按，将会输出逻辑1，按钮向下按，将会输出逻辑0，如下图所示：
    
    ![image_1eqfaft1k1mf21dt61jtjorg14q31g.png-19.6kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/74c0600b8a724276bdf295039b7b41ab~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=604&h=324&s=20064&e=png&b=fdfdfd)
    
    > 小贴士：  
    >   
    > 当然我们希望自己的手指就能发出高电压信号和低电压信号，然后作为`ALU`的输入，不过这听起来有点儿科幻，现在还实现不了（我以前一直在想段誉的六脉神剑是不是通过发送电压信号实现的）。
    
    现在我们就可以通过手动调节按钮来生成逻辑1或者逻辑0了。我们也可以使用多个按钮来生成更多个信号，比方说我们使用4个按钮就可以生成4个信号：
    
    ![image_1eqfaisdue9j1ltt1dqvhkq194u2a.png-39.7kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/0c7466775917459d920a22a0df4e868d~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=621&h=451&s=40602&e=png&b=fefefe)
    
    这个设备生成的电压信号可以作为ALU的输入信号，我们也把它称作`输入设备`。每个信号都可以代表一个二进制位，我们刚刚制作的这个输入设备可以产生4个信号，所以该设备也可以被称为`4位输入设备`。我们也可以按照相同的套路去制作一个`8位输入设备`，不过线路太多搞的人头晕眼花的，是时候使用黑盒封装大法，把那些麻烦的电路封装在黑盒子里，就像这样：
    
    ![image_1duua2j081sia1hjo185518fe1l3m55.png-30.7kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/38cf6cc5a69347bf9e30bf2bbd94ca84~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=626&h=287&s=31449&e=png&b=fafafa)
    
    这个`8位输入设备`生成的每个信号都可以当作一个二进制位，如果将这些二进制位看作8位无符号数的话，那么它能表示的数值范围就是`0~255`。如果把这些二进制位看作有符号数的话，代表的数值范围是多少呢？还记得么~
    
*   怎么知道ALU的输出信号是什么呢？
    
    当两组输入信号`A`、`B`经过`ALU`之后会得到一组输出信号`Y`，我们也不能像中医把脉那样去摸某根输出导线上的电压是几伏，所以需要一个输出设备来向我们人类展示一下这些输出信号到底是高电压还是低电压。我们当然可以使用电压表来测量每一个输出信号的电压，不过考虑到信号只有逻辑0和逻辑1两种类型，也就是高电压信号和低电压信号两种类型，我们使用灯泡来测试输出信号更简洁一点：
    
    *   当输出信号是低电压信号时，灯泡不亮
    *   当输出信号是高电压信号时，灯泡发光。
    
    如下图所示：
    
    ![image_1eqjtqbi914mrls01ul1csov52n.png-47.5kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/030fadce729c4778bc00cff72624a4fd~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=938&h=281&s=48678&e=png&b=fefdfd)
    
    这样我们可以将`ALU`的每个输出信号都作为一个灯泡的输入信号，灯泡不亮就说明`ALU`的输出信号为低电压，也就是`逻辑0`；灯泡发光就说明`ALU`的输出信号为`高电压`，也就是`逻辑1`。这里的灯泡就是简易的`输出设备`。
    

回到狗哥提的问题上来，因为要累加的那些数都比较小，8位无符号数已经足够表示它们本身以及它们的加和结果，所以我们可以采用两个`8位输入设备`来为`ALU`产生输入信号，1个`8位输出设备`来解释`ALU`的输出信号。由于我们之前设计的`ALU`只包含2个控制信号，所以也就可以使用`2位输入设备`来生成控制信号，我们画个图展示一下（因为有2个8位输入设备，我们把图中靠上的那个称之为`1号输入设备`，把图中靠下的那个称之为`2号输入设备`）：

![image_1eqjvb54n4av11ri1ahg1b2gnsvm.png-29kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5ea2c43fabc64d8f95abf891ca8d62fa~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=541&h=585&s=29657&e=png&b=fdfdfd)

画这么多线会不会太碍眼了，我们简化一下，把输入设备产生的多个信号用1条粗线表示，把输出设备接收的多个信号也用1条粗线表示，然后在粗线上边画一个斜杠，然后在斜杠上写上数字代表有几个输入信号或者几个输出信号，就像这样：

![image_1eqk1g1h71th5bk91e4loa11gll13.png-24.7kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4c043f1727c84e40ac88e877867007c7~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=574&h=584&s=25339&e=png&b=fdfdfd)

嗯，清爽多了！

手动累加
----

由于刚刚制作的输入设备不太高级，我们只能先手动的将十进制数转换为二进制数（上边展示的`ALU`接收的每组输入信号都可以代表一个8位二进制数，所以我们就把这些十进制数转换成8位二进制数）：

    74₁₀:  01001010₂
    29₁₀:  00011101₂
    32₁₀:  00100000₂
    20₁₀:  00010100₂
    

我们接下来先将`ALU`的控制信号调节成`S₁=0, S₀=0`，那么此时`ALU`就相当于一个加法器，然后我们就可以按照下边的步骤计算这4个数的和：

*   步骤1：在`1号输入设备`上通过按动按钮生成`01001010₂`（74₁₀）对应的信号，在`2号输入设备`上通过按动按钮生成`00011101₂`（29₁₀）对应的信号，然后在ALU的输出设备上观测到结果是：`01100111₂`（103₁₀），这个`01100111₂`是累加过程中的一个中间结果，我们需要先将这个`01100111₂`写到纸上以备下一步骤使用。这一步骤相当于完成了下边的运算过程：
    
        01001010₂（74₁₀） + 00011101₂（29₁₀） = 01100111₂（103₁₀）
        
    
*   步骤2：在`1号输入设备`上通过按动按钮生成`01100111₂`（103₁₀，上一步骤中计算得到的中间结果）对应的信号，然后在`2号输入设备`上通过按动按钮生成`00100000₂`（32₁₀）对应的信号，然后在ALU的输出设备上观测到结果是：`10000111₂`（135₁₀），它也是一个中间结果，将它写到纸上以备下一步骤使用。这一步骤相当于完成了下边的运算过程：
    
        01100111₂（103₁₀） + 00100000₂（32₁₀） = 10000111₂（135₁₀）
        
    
*   步骤3：同理，计算上一步骤中得到的中间结果`10000111₂`（135₁₀）与`00010100₂`（20₁₀）的和为`10011011₂`（155₁₀）。这一步骤相当于完成了下边的运算过程：
    
        10000111₂（135₁₀） + 00010100₂（20₁₀） = 10011011₂（155₁₀）
        
    

现在没有还未累加的数了，所以这个`10011011₂`就是最终的累加结果，我们再手动将其翻译成十进制的形式就是：`155`，大功告成！

此时狗哥无情的嘲笑道：这个也太不智能了吧，还不如我自己掰着手指头算着快！面对无情的嘲笑，我们只能硬着头皮继续改进，并感叹道：科学的进步总是在无情的唾沫星子中艰难的前进着。

使用多个硬件设备进行改进
------------

再观察一下上边的计算步骤，我们得把每一步骤中产生的结果先记到纸上，然后到下一个步骤中再使用输入设备为其产生对应的信号。其实如果使用多个输入设备和`ALU`的话，可以将这个环节省略掉，我们重新画一下电路图：

![image_1e33nesdb1pl8olf10563787ol9.png-30.3kB](https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/647f2c0ac0ad4b26bdef1474ff0413fc~tplv-k3u1fbpfcp-jj-mark:1600:0:0:0:q75.image#?w=638&h=445&s=31003&e=png&b=ffffff)

如图所示，现在我们的任务只是通过按动各个输入设备上的按钮，来分别生成各个加数对应的信号，然后就可以在最后一个ALU后边连接的输出设备中读取出最终的输出。

这种方案是比上一种方案省事了一点儿，不过，emmm... 用的硬件是不是太多了一点儿，要是计算100个数的和，那得要多少输入设备和`ALU`呀～ 不好不好，我们需要继续改进。不过这时候我们需要引入一下存储设备的概念了，别着急，且听下回分解！